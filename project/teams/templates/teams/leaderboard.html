{% extends 'base.html' %}
{% load static %}

{% block title %}ExePLORE - Team Leaderboard{% endblock %}

{% block extra_css %}
<style>
    .leaderboard-page {
        letter-spacing: 0.3em;
        background-image: url('https://www.transparenttextures.com/patterns/dark-wood.png');
        background-color: #73624b;
        min-height: calc(100vh - 74px);
        margin: 0;
        padding: 20px 0;
    }

    .leaderboard-container {
        opacity: 0.8;
        margin: auto;
        margin-top: 20px;
        width: 100%;
        max-width: 700px;
        padding: 0 20px;
    }

    .leaderboard-page h1 {
        text-align: center;
        font-size: 2.5rem;
        margin-bottom: 20px;
        color: #ccccbb;
    }

    .team-card {
        background: #b0cc99;
        margin: 5px auto;
        border-radius: 5px;
        left: -15px;
        padding: 10px;
        display: flex;
        height: 40px;
        width: 90%;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        position: relative;
        transition: transform 0.2s;
    }

    .team-card::after {
        content: '';
        position: absolute;
        top: -15px;
        left: -15px;
        right: -15px;
        bottom: -15px;
        border-radius: 20px;
        z-index: 0;
    }

    .team-card .team-points {
        position: relative;
        z-index: 1;
        font-size: 1rem;
        letter-spacing: 0.1em;
        font-weight: bold;
    }

    .team-card .team-name {
        position: center;
        letter-spacing: 0.05em;
    }

    .team-rank {
        margin-right: 10px;
    }

    .medal {
        width: 50px;
        height: auto;
        margin-left: -5px;
        margin-right: 35px;
    }

    .team-name.shifted {
        margin-left: -55px;
    }

    .team-card:hover {
        transform: scale(1.05);
    }

    .team-card.alt {
        background: #b7ca79;
    }

    .leaderboard-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    @media (max-width: 768px) {
        .leaderboard-container {
            padding: 0 10px;
        }

        .team-card {
            width: 95%;
        }

        .leaderboard-page h1 {
            font-size: 2rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="leaderboard-page">
    <div class="leaderboard-container">
        <h1>Team Leaderboard</h1>
        <ol class="leaderboard-list">
            {% for team in teams %}
                <li class="team-card">
                    <span class="team-rank">
                        {% if not forloop.first %}
                            {{ forloop.counter }}.
                        {% endif %}
                        {% if forloop.first %}
                            <img src="{% static 'teams/gold.png' %}" alt="Gold Medal" class="medal">
                        {% endif %}
                    </span>
                    <span class="team-name {% if forloop.first %}shifted{% endif %}">{{ team.name }}</span>
                    <span class="team-points">{{ team.points }} pts</span>
                </li>
            {% empty %}
                <li class="team-card"><span>No teams available.</span></li>
            {% endfor %}
        </ol>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const teamCards = document.querySelectorAll('.team-card');
        teamCards.forEach((card, index) => {
            if (index % 2 === 1) {
                card.classList.add('alt');
            }
        });
    });
</script>
{% endblock %}